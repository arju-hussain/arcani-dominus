async function loadLeaderboard() {
    try {
        const leaderboardDiv = document.getElementById("leaderboard");
        if (!leaderboardDiv) {
            console.error("❌ leaderboardDiv not found in HTML.");
            return;
        }

        leaderboardDiv.innerHTML = "<p>Loading...</p>";

        const leaderboardQuery = query(
            collection(db, "players"),
            orderBy("level", "desc")
        );

        const querySnapshot = await getDocs(leaderboardQuery);

        if (querySnapshot.empty || querySnapshot.docs.length === 0) {
            leaderboardDiv.innerHTML = "<p>No players found.</p>";
            return;
        }

        let leaderboardHTML = "<ol>";
        querySnapshot.forEach(doc => {
            const player = doc.data();
            if (!player.name || player.level === undefined || player.level === null) {
                console.warn("⚠ Skipping invalid player:", player);
                return;
            }
            leaderboardHTML += `<li>${player.name} - Level ${player.level}</li>`;
        });
        leaderboardHTML += "</ol>";

        leaderboardDiv.innerHTML = leaderboardHTML;
        leaderboardDiv.classList.remove("hidden");
        leaderboardDiv.style.display = "block";
    } catch (error) {
        console.error("❌ Error loading leaderboard:", error);
        document.getElementById("leaderboard").innerHTML = "<p>Error loading leaderboard.</p>";
    }
}
